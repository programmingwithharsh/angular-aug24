<app-nav></app-nav>
<h1>Add Customer</h1>
<div class="card">
    <div class="card-header">
        Sign Up!
    </div>
    <div class="card-body">
        <form novalidate [formGroup]="customerForm">
            <div class="form-group row mb-2">
                <div class="col-xxl-2">
                    <label>First Name</label>
                </div>
                <div class="col-xxl-8">
                    <input class="form-control" type="text" placeholder="First Name (required)"
                        formControlName="firstName" [ngClass]="{'is-invalid': (customerForm.get('firstName')?.touched ||
                                                   customerForm.get('firstName')?.dirty) &&
                                                   !customerForm.get('firstName')?.valid}" />

                    <span class="invalid-feedback">
                        <span *ngIf="customerForm.get('firstName')?.['errors']?.['required']">
                            Please enter your first name.
                        </span>
                        <span *ngIf="customerForm.get('firstName')?.['errors']?.['minlength']">
                            The firstname must be longer than 3 characters.
                        </span>
                    </span>
                </div>
            </div>

            <div class="form-group row mb-2">
                <div class="col-xxl-2">
                    <label>Last Name</label>
                </div>
                <div class="col-xxl-8">
                    <input class="form-control" type="text" placeholder="Last Name (required)"
                        formControlName="lastName" [ngClass]="{'is-invalid': (customerForm.get('lastName')?.touched ||
                                                   customerForm.get('lastName')?.dirty) &&
                                                   !customerForm.get('lastName')?.valid}" />

                    <span class="invalid-feedback">
                        <span *ngIf="customerForm.get('lastName')?.['errors']?.['required']">
                            Please enter your last name.
                        </span>
                        <span *ngIf="customerForm.get('lastName')?.['errors']?.['maxlength']">
                            The last name must be less than 50 characters.
                        </span>
                    </span>
                </div>
            </div>

            <div class="form-group row">
                <div class="offset-xxl-2 col-xxl-4 mt-2">
                    <button class="btn btn-primary" type="submit" [disabled]="!customerForm.valid"
                        (click)="save()">Save</button>
                </div>
            </div>

        </form>
    </div>
</div>

<div>
    <div>Dirty: {{ customerForm.dirty}}</div>
    <div>Touched: {{ customerForm.touched}}</div>
    <div>Valid: {{ customerForm.valid}}</div>
    <div>Value: {{ customerForm.value | json}}</div>
    <hr />
    <div>Checking Touched {{customerForm.get('firstName')?.touched}}</div>
    <div>Checking Dirty: {{customerForm.get('firstName')?.dirty}}</div>
    <div>Checking Valid: {{customerForm.get('firstName')?.valid}}</div>
    <div>Checking Value: {{customerForm.get('firstName')?.value}}</div>
</div>

<h1>Customer List</h1>
<div class="table-responsive">
    <table *ngIf="customers && customers.length" class="table table-striped table-hover">
        <thead>
            <tr>
                <th>Name</th>
                <th>Age</th>
                <th>Address</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let customer of customers">
                <td>{{customer.name}}</td>
                <td>{{customer.age}}</td>
                <td>{{customer.address}}</td>
            </tr>
        </tbody>
    </table>
</div>

<div *ngIf="errorMessage" class="alert alert-danger">
    Display some error: {{ errorMessage }}
</div>